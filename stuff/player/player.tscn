[gd_scene load_steps=16 format=3 uid="uid://clctywuy6360q"]

[ext_resource type="Script" path="res://stuff/player/Player.gd" id="1_t4s5t"]
[ext_resource type="Texture2D" uid="uid://cyf8n5pwjq4w0" path="res://assets/art/player/player.svg" id="3_b2ptu"]
[ext_resource type="Script" path="res://stuff/player/PlayerInput.gd" id="3_suva5"]
[ext_resource type="Texture2D" uid="uid://bjuqtlgy7yj1o" path="res://assets/art/player/sword.svg" id="4_ml655"]
[ext_resource type="Script" path="res://stuff/player/PlayerWeapon.gd" id="5_0bs8x"]
[ext_resource type="PackedScene" uid="uid://dm1ieqpngwl4s" path="res://stuff/systems/hit system/hit_system.tscn" id="5_8w73v"]
[ext_resource type="Script" path="res://stuff/equipables/weapons/sword/Sword.gd" id="5_y8moi"]
[ext_resource type="PackedScene" uid="uid://chm7svgl6dutb" path="res://stuff/systems/health system/health_system.tscn" id="6_vwj8c"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_voq87"]
radius = 14.0
height = 40.0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_nlcxu"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:player_id")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath(".:velocity")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("Art:scale")
properties/3/spawn = true
properties/3/replication_mode = 1

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_ord1v"]
properties/0/path = NodePath("PlayerInput:direction")
properties/0/spawn = true
properties/0/replication_mode = 1

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rcxn8"]
size = Vector2(35, 42)

[sub_resource type="Animation" id="Animation_kkktk"]
resource_name = "idle"
length = 0.001
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sword:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(-2.26893, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sword:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(16, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/2/type = "bezier"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sword:position:x")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(8, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="Animation" id="Animation_gyrh3"]
resource_name = "slash"
length = 0.6
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sword:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0, 0, 0, 0, 0),
"points": PackedFloat32Array(-2.26893, -0.25, 0, 0.25, 0, -0.528707, -0.25, 0, 0.25, 0, 0.498948, -0.25, 0, 0.25, 0, -0.528707, -0.25, 0, 0.25, 0, -2.26893, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 0.2, 0.3, 0.4, 0.6)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sword:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0, 0, 0, 0, 0),
"points": PackedFloat32Array(16, -0.25, 0, 0.25, 0, 12, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0, 12, -0.25, 0, 0.25, 0, 16, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 0.2, 0.3, 0.4, 0.6)
}
tracks/2/type = "bezier"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sword:position:x")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"handle_modes": PackedInt32Array(0, 0, 0, 0, 0),
"points": PackedFloat32Array(8, -0.25, 0, 0.25, 0, 9, -0.25, 0, 0.25, 0, 9, -0.25, 0, 0.25, 0, 9, -0.25, 0, 0.25, 0, 8, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 0.2, 0.3, 0.4, 0.6)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ysvug"]
_data = {
"idle": SubResource("Animation_kkktk"),
"slash": SubResource("Animation_gyrh3")
}

[node name="Player" type="CharacterBody2D"]
script = ExtResource("1_t4s5t")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 4)
shape = SubResource("CapsuleShape2D_voq87")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_nlcxu")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_ord1v")
script = ExtResource("3_suva5")

[node name="Camera2D" type="Camera2D" parent="."]
limit_left = 0
limit_bottom = 648

[node name="Art" type="Node2D" parent="."]

[node name="Sprite2d" type="Sprite2D" parent="Art"]
texture = ExtResource("3_b2ptu")

[node name="Weapon" type="Node2D" parent="Art"]
z_index = 1
script = ExtResource("5_0bs8x")

[node name="Sword" type="Node2D" parent="Art/Weapon"]
script = ExtResource("5_y8moi")

[node name="Area2D" type="Area2D" parent="Art/Weapon/Sword"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Art/Weapon/Sword/Area2D"]
position = Vector2(39.5, 4)
shape = SubResource("RectangleShape2D_rcxn8")
disabled = true

[node name="HitSystem" parent="Art/Weapon/Sword" instance=ExtResource("5_8w73v")]
knockback = 300.0
vertical_knockback = 300.0

[node name="Sword" type="Sprite2D" parent="Art/Weapon/Sword"]
position = Vector2(8, 16)
rotation = -2.26893
texture = ExtResource("4_ml655")
offset = Vector2(18.335, 0)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Art/Weapon/Sword"]
libraries = {
"": SubResource("AnimationLibrary_ysvug")
}
autoplay = "idle"

[node name="HealthSystem" parent="." instance=ExtResource("6_vwj8c")]
health = 4

[connection signal="body_entered" from="Art/Weapon/Sword/Area2D" to="Art/Weapon/Sword/HitSystem" method="hit"]
[connection signal="animation_finished" from="Art/Weapon/Sword/AnimationPlayer" to="Art/Weapon/Sword" method="_on_animation_finished"]
[connection signal="apply_knockback" from="HealthSystem" to="." method="_apply_knockback"]
[connection signal="die" from="HealthSystem" to="." method="_on_death"]
